version: 2

sources:
  - name: bronze
    schema: bronze
    tables:

      - name: users_cdc
        description: "Raw CDC events after JSON parsing (Bronze layer)."

        columns:

          - name: id
            description: "Internal surrogate key generated by ingestion (if present)."

          - name: user_id
            description: "UUID of the user from source system."
            tests:
              - not_null

          - name: gender
            description: "User gender."

          - name: first_name
            description: "User first name."

          - name: last_name
            description: "User last name."

          - name: email
            description: "User email address."

          - name: password
            description: "Password hash or bcrypt value."

          - name: dob
            description: "Date of birth as YYYY-mm-dd if provided."

          - name: dob_days
            description: "Debezium numeric DOB (days since epoch). Used for conversion."

          - name: phone
            description: "Primary phone number."

          - name: cell
            description: "Mobile phone number."

          - name: picture_large
            description: "Large profile picture URL."

          - name: picture_medium
            description: "Medium profile picture URL."

          - name: picture_thumbnail
            description: "Thumbnail picture URL."

          - name: city
            description: "User's reported city."

          - name: state
            description: "State name from source JSON."

          - name: state_id
            description: "Raw state identifier from source."

          - name: postcode
            description: "Zip / postal code."

          - name: latitude
            description: "Latitude from geo section."

          - name: longitude
            description: "Longitude from geo section."

          - name: created_at
            description: "Original created_at timestamp from source."

          - name: ingested_at
            description: "Timestamp when CDC event was ingested."